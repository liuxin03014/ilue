$(document).ready(function(){const r=$("#image-grid").isotope({itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-item"}});let t=Number(document.querySelector("#image-grid").getAttribute("data-index"))+1;const o=document.querySelector("#image-grid").getAttribute("data-total"),n=ThemeConfig.blog_url;var e=document.querySelector(".joe_loading");function i(){var e=document.querySelectorAll(".grid-item");const t=new IntersectionObserver(function(e,o){e.forEach(function(e){var t;e.isIntersecting&&(t=e.target.querySelector(".lazy-load"))&&(t.src=t.dataset.src,t.classList.remove("lazy-load"),o.unobserve(e.target),t.onload=function(){r.isotope("layout")})})},{threshold:.5});e.forEach(function(e){t.observe(e)})}i();new IntersectionObserver(e=>{e[0].isIntersecting&&!async function(){var e=n+"/photos/page/"+t;t>o?document.querySelector(".joe_loading").remove():fetch(e).then(e=>e.text()).then(e=>{e=(new DOMParser).parseFromString(e,"text/html").querySelectorAll(".grid-item");0<e.length&&(e.forEach(e=>{r.append(e).isotope("appended",e)}),r.isotope("layout"),i(),++t>o)&&document.querySelector(".joe_loading").remove()}).catch(e=>{console.error("Error fetching next page data:",e)})}()},{threshold:1}).observe(e),$(".joe_photos__filter li").on("click",function(){const t=$(this).attr("data-sjslink");$(this).addClass("active").siblings().removeClass("active"),r.isotope({filter:function(){var e=$(this).attr("data-sjsel");return"*"===t||e===t}})})});